Thu Oct  8 12:13:20 BST 1998 sll
===============================

- Final touch-up before 2.6.0

include/omniORB2/CORBA_sysdep.h
include/omniORB2/omniInternal.h
src/lib/omniORB2/dynAnyP.cc
src/lib/omniORB2/dynAnyP.h
src/tool/omniidl2/fe/y.tab.cc
src/tool/omniidl2/fe/lex.yy.cc
src/tool/omniidl2/driver/drv_main.cc

Tue Oct  6 16:16:20 BST 1998 sll
================================

- Accept request-reply invocation with response_expected flag said to FALSE.
  Apparently, this is allowed in DII (for reasons I do not understand).

src/tool/omniidl2/o2be_operation.cc


Fri Oct  2 20:24:54 BST 1998 sll
================================

- omnithread on nt dtor bug fix

src/lib/omnithread/nt.cc

Fri Oct  2 20:21:47 BST 1998 sll
================================

- updated omniORB2 user guide

doc/tex/omniORB2.tex


Thu Sep 24 14:19:59 BST 1998 sll
================================

- Added workaround for a bug in SUN C++ compiler template code regeneration.

include/omniORB2/CORBA_sysdep.h
include/omnithread.h

- Bug fix, incomplete GIOP CloseConnection message was sent when a connection
  was shut.

src/lib/omniORB2/tcpSocketMTfactory.cc



Wed Aug 26 22:57:21 BST 1998 sll
================================

- New variable omniORB::maxTcpConnectionPerServer
  This variable controls the maximum number of tcp connections to open to
  a server. Previously this variable is hard-coded to 5.

src/lib/omniORB2/corbaOrb.cc
src/lib/omniORB2/tcpSocketMTfactory.cc
include/omniORB2/omniORB.h


Wed Aug 26 19:36:32 BST 1998 sll
================================

- Now accept the following as valid IDL:

   interface Y {
        attribute double X;
        void f(in long x);
   };
   Previously, omniidl2 wrongly thinks that X clashes with x.

- Complete the previous fix for the bug in LifeCycle support.

src/tool/omniidl2/ast/ast_operation.cc
src/tool/omniidl2/omniORB2_be/o2be_interface.cc


Wed Aug 26 11:57:20 BST 1998 sll
================================

- Minor updates to remove warnings when compiled with standard C++ compilers.

src/tool/omniidl2/fe/idl.ll
src/tool/omniidl2/fe/lex.yy.cc
src/appl/omniNames/NamingContext_i.cc
src/lib/omniORB2/corbaObject.cc
src/lib/omniORB2/dynAnyP.cc
src/lib/omniORB2/mbufferedStream.cc
src/lib/omniORB2/object.cc
src/lib/omniORB2/objectRef.cc

Tue Aug 25 19:50:00 BST 1998 sll
================================

- Update to make gcc-2.7.2 and egcs to compile happily
- Now build shared library when the compiler is egcs.

include/omniORB2/CORBA.h

src/lib/omniORB2/sharedlib/dir.mk
src/lib/omniORB2/gatekeepers/tcpwrapper/sharedlib/dir.mk
src/lib/omnithread/sharedlib/dir.mk

src/lib/omniORB2/bootstrap_i.h
src/lib/omniORB2/bootstrap_i.cc
src/lib/omniORB2/dynAnyP.cc
src/lib/omniORB2/dynAny.cc



Tue Aug 25 16:18:24 BST 1998 sll
================================

- MSVC++ workaround in the stub code.

   module A {
      interface B {
      };
   };

   module C {
       interface B : A::B {
       };
   };

   In C::_sk_B::dispatch, must call A::_sk_B::dispatch as
     ((A__sk_B*)this)->A__sk_B::dispatch.
   Otherwise, the invocation would just end up calling itself infinitely.
   This previous workaround A__sk_B::dispatch does not deal with the case
   when the interface name is the same (even though they are in different
   modules).


- Bug in LifeCycle support. The following causes a run-time error when
  omniidl2 is invoked with the -l option:

  // IDL:
  interface foo {
    ...
  };
  interface bar : foo {
    ...
  };


  // C++:
  class foo_i : public virtual _lc_sk_foo {
    ...
  };
  class bar_i : public virtual _lc_sk_bar, public virtual foo_i {
    ...
  }

  // Inside a factory:
  bar_i *bi = // New object of class bar_i;
  bi->_obj_is_ready(boa);

  foo_i *fi = bi;

  CORBA::Object_var obj = fi->_this();  // ERROR -- returns nil


src/tool/omniidl2/omniORB2_be/o2be_interface.cc




Sat Aug 22 13:42:09 BST 1998 sll
================================

- Merged Irix 6.2 patch

include/omniORB/CORBA_sysdep.h
include/omnithread.h

src/lib/omnithread/posix.cc
src/lib/omnithread/sharedlib/dir.mk
src/lib/omniORB2/sharedlib/dir.mk
src/lib/omniORB2/gatekeepers/tcpwrapper/dir.mk
src/lib/omniORB2/gatekeepers/tcpwrapper/sharedlib/dir.mk

src/tool/omniidl2/driver/drv_fork.cc
src/tool/omniidl2/driver/drv_preproc.cc

src/appl/omniNames/log.cc



Fri Aug 21 20:00:38 BST 1998 sll
================================

- Added support for javaIDL bootstrap protocol
     The ORB obtain the initial object reference for the NameService
     through this IDL interface:

          module CORBA {
               interface InitialReferences {
                  Object get(in ORB::ObjectId id);
                  ORB::ObjectIdList list();
               };
          };
     This interface is implemented by a special object whoise object key
     is 4 bytes long and contains the word 'INIT'.
     The command line option:
             -ORBInitialHost <hostname> -ORBInitialPort <port>
     tells the ORB to contact the special object at the hostname+port.
     This overrides the initial object reference read from omniORB.cfg.

     Two additional key can be added to omniORB.cfg:
           ORBInitialHost   <hostname>
           ORBInitialPort   <port 1-65535>
     which correspond to the command line options.

include/omniORB2/CORBA.h
include/omniORB2/omniInternal.h
src/lib/omniORB2/dir.mk
src/lib/omniORB2/sharedlib/dir.mk
src/lib/omniORB2/giopServer.cc
src/lib/omniORB2/initFile.cc
src/lib/omniORB2/initFile.h
src/lib/omniORB2/corbaOrb.cc
src/lib/omniORB2/corbaBoa.cc
src/lib/omniORB2/bootstrap.idl
src/lib/omniORB2/bootstrap_i.h
src/lib/omniORB2/bootstrap_i.cc
src/appl/omniNames/log.cc

Wed Aug 19 20:09:17 BST 1998 sll
================================

- Bug fix: omniidl2 dump core with the following illegal syntax:

     exception E {};
     typedef sequence<E> EL;

src/tool/omniidl2/omniORB2_be/o2be_sequence.cc


Wed Aug 19 16:33:54 BST 1998 sll
================================

- Modified omniidl2.
- In the new stubs, all <<= and >>= operators are generated in the global 
  namespace.
  Previously, these operators for types in a namespace A is defined in that
  namespace. This creates problems to some compilers that support namespace
  but not the koenig lookup (e.g. DEC C++ 5.6 and 6.0).

include/omniORB2/CORBA.h
include/omniORB2/CORBA_sysdep.h
include/omniORB2/bufferedStream.h

src/lib/omniORB2/objectRef.cc
src/lib/omniORB2/typecode.cc

src/tool/omniidl2/include/idl.hh
src/tool/omniidl2/omniORB2_be/o2be.h
src/tool/omniidl2/omniORB2_be/o2be_array.cc
src/tool/omniidl2/omniORB2_be/o2be_constant.cc
src/tool/omniidl2/omniORB2_be/o2be_enum.cc
src/tool/omniidl2/omniORB2_be/o2be_exception.cc
src/tool/omniidl2/omniORB2_be/o2be_interface.cc
src/tool/omniidl2/omniORB2_be/o2be_module.cc
src/tool/omniidl2/omniORB2_be/o2be_name.cc
src/tool/omniidl2/omniORB2_be/o2be_sequence.cc
src/tool/omniidl2/omniORB2_be/o2be_struct.cc
src/tool/omniidl2/omniORB2_be/o2be_typedef.cc
src/tool/omniidl2/omniORB2_be/o2be_union.cc
src/tool/omniidl2/omniORB2_be/o2be_root.cc

New member functions void produce_binary_operators_in_hdr and the like
are responsible for generating binary operators <<= etc in the global
namespace.


Thu Aug 13 19:01:24 BST 1998 sll
================================

- Update to work under DU 4.0D and DEC C++ 6.0
- The lex and yacc files in the frontend are regenerated using flex and
  bison.

mk/platforms/alpha_osf1_4.0.mk

include/omniORB2/CORBA.h
include/omniORB2/CORBA_sysdep.h
include/omniORB2/bufferedStream.h

src/lib/omniORB2/dynAnyP.h
src/lib/omniORB2/objectKey.cc
src/lib/omniORB2/objectRef.cc
src/lib/omniORB2/typecode.cc
src/lib/omniORB2/sharedlib/dir.mk
src/lib/omnithread/sharedlib/dir.mk
src/tool/omniidl2/fe/dir.mk
src/tool/omniidl2/fe/idl.ll
src/tool/omniidl2/fe/idl.yy
src/tool/omniidl2/fe/lex.yy.cc
src/tool/omniidl2/fe/y.tab.cc
src/tool/omniidl2/fe/y.tab.h


Thu Aug 13 17:08:30 BST 1998 sll
================================

- Now can accept IOR  with IIOP 1.1 profile. IIOP 1.1 specific part of the
  profile is ignored siliently.

src/lib/omniORB2/tcpSocket.cc
src/appl/utils/catior/catior.cc

Wed Aug 12 19:19:37 BST 1998 sll
================================

- Improved error recovery in omniidl2
  previously, the compiler core dump with the following invalid IDL.

    interface SomeObject;
    interface Junk {
        void m1 (in stringsomevalue);
        void m2 (in int junk);
        void m3 (in SomeObject * somevalue);
    };

src/tool/omniidl2/fe/idl.yy
src/tool/omniidl2/fe/y.tab.cc


Wed Aug 12 16:28:43 BST 1998 dpg1
=================================

- Added better error checking to LifeCycle code

include/omniORB2/omniLC.h

Tue Aug 11 20:03:37 BST 1998 sll
================================

- Merged SCO OpenServer 5 patch

include/omnithread/omnithread.h
src/lib/omniORB2/libcWrapper.cc
src/lib/omniORB2/gatekeepers/tcpwrapper/tcpd.h
src/lib/omniORB2/gatekeepers/tcpwrapper/dir.mk

Tue Aug 11 18:45:23 BST 1998 sll
================================

- Merged Phar Lap Realtime ETS-Kernel patch

src/dir.mk
src/lib/omniORB2/dir.mk
src/lib/omnithread/dir.mk
src/lib/omniORB2/initFile.h
src/lib/omniORB2/initFile.cc

Tue Aug 11 12:42:56 BST 1998 sll
================================

- Merged VMS patches

include/omniORB2/CORBA_sysdep.h
include/omniORB2/CORBA_basetypes.h
src/lib/omniORB2/corbaFloat.cc           NEW (only for VMS)


Mon Aug 10 19:02:33 BST 1998 sll
================================

- Fixed Any ctor Any(TypeCode_ptr,void*,Boolean) and
                 void replace(TypeCode_ptr, void*, Boolean)
  to accept null second argument.

src/lib/omniORB2/any.cc

Mon Aug 10 16:23:35 BST 1998 sll
================================

- Fixed the following omniidl2 bugs:

// omniidl2 generates the wrong constant values for the following:
const octet a=20;
const octet b='A';

// omniidl2 fails to recognise octet is a valid discriminant type.
typedef octet d;
union XU switch(d)
{
  case 1: long l;
  case 2: short s;
};

// operators '<<' and '>>' are interpreted the wrong way.
const unsigned short losBitNumber1 = 0x02 << 1;
const unsigned short losBitNumber2 = 0x02 >> 1;


src/tool/omniidl2/omniORB2_be/o2be_root.cc
src/tool/omniidl2/omniORB2_be/o2be_cfe_interface.cc
src/tool/omniidl2/omniORB2_be/o2be_union.cc
src/tool/omniidl2/fe/idl.yy
src/tool/omniidl2/fe/y.tab.cc
src/tool/omniidl2/ast/ast_expression.cc


Fri Aug  7 11:39:06 BST 1998 sll
================================

- Fix compiler flag for building static omniORB2 libraries for win32

mk/win32.mk
src/lib/omniORB2/dir.mk
src/lib/omniORB2/sharedlib/dir.mk
src/lib/omnithread/dir.mk
src/lib/omnithread/sharedlib/dir.mk


Wed Aug  5 18:50:18 BST 1998 sll
================================

- Version variable is now omniORB_2_6 (previously omniORB_2_5).
- omniORB shared library version is now 2.6.0.
- omniLC shared library version is now 1.2.2
- DynAny implementation

include/omniORB2/CORBA.h
include/omniORB2/bufferedStream.h
include/omniORB2/omniInternal.h

src/lib/omniORB2/dynAny.cc     NEW
src/lib/omniORB2/dynAnyP.h     NEW
src/lib/omniORB2/dynAnyP.cc    NEW

src/lib/omniORB2/sharedlib/dir.mk
src/lib/omniORB2/dir.mk
src/lib/omniORB2/tcParseEngine.h
src/lib/omniORB2/tcParseEngine.cc
src/lib/omniORB2/typecode.cc
src/lib/omniORB2/any.cc
src/lib/omniORB2/constants.cc

src/tool/omniidl2/driver/dir.mk
src/tool/omniidl2/omniORB2_be/o2be_root.cc
src/tool/omniidl2/driver/drv_main.cc

src/appl/omniNames/dir.mk


Tue Aug  4 20:04:23 BST 1998 sll
================================

- New win32 wrappers to accomodate both GNU-WIN32 and OpenNT.

mk/beforedir.mk
mk/win32.mk
src/tool/win32/dir.mk
src/tool/win32/clwrapper.c
src/tool/win32/libwrapper.c
src/tool/win32/linkwrapper.c


Tue Aug  4 09:04:23 BST 1998 sll
================================

Version 5.5 tree copied from version5.4 tree.

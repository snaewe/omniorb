
Mon Feb 22 09:21:56 GMT 1999 djr
================================

- Bug in size calculation for sequence and array TypeCodes.

src/lib/omniORB2/dynamic/typecode.cc


Fri Feb 19 11:21:18 GMT 1999 djr
================================

- Fixed bug in omniidl2. Generated incorrect code for array types
  nested 3 or more levels deep.

src/tool/omniidl2/omniORB2_be/o2be_array.cc


Thu Feb 18 15:15:24 GMT 1999 djr
================================

- omniORB::strictIIOP is now true by default.
- New command-line option -ORBlcdMode (omniORB::enableLcdMode())
  (includes not using indirections for on-the-wire TypeCodes)

include/omniORB2/omniORB.h
src/lib/omniORB2/orbcore/corbaOrb.cc
src/lib/omniORB2/dynamic/typecode.cc

- Implemented CORBA::ORB::send_multiple_requests_* and friends.
- Modifications to implementation of DII.

include/omniORB2/CORBA.h
src/lib/omniORB2/dynamic/deferredRequest.h
src/lib/omniORB2/dynamic/deferredRequest.cc
src/lib/omniORB2/dynamic/request.cc
src/lib/omniORB2/dynamic/orbMultiRequest.cc
src/lib/omniORB2/dynamic/context.h
src/lib/omniORB2/dynamic/request.h

- Slight modification to the files to include Interface Repository
  stubs to remove a problem when compiling debug version under
  egcs

src/lib/omniORB2/dynamic/irstub.cc
src/lib/omniORB2/dynamic/irdynstub.cc
src/lib/omniORB2/dynamic/corbaidlstub.cc
src/lib/omniORB2/dynamic/corbaidldynstub.cc

- Bug in TypeCode parser which read the byte order from a stream
  to which it was writing.

src/lib/omniORB2/dynamic/tcParser.cc

- Added virtual destructor to NamedValueImpl

src/lib/omniORB2/dynamic/namedValue.cc


Wed Feb 17 16:11:43 GMT 1999 djr
================================

- Fixed bug in implementation of omni_semaphore over POSIX.

src/lib/omnithread/posix.cc


Fri Feb 12 11:52:23 GMT 1999 djr
================================

- TypeCodes for arrays were marshalled incorrectly.

src/lib/omniORB2/dynamic/typecode.cc


Thu Feb 11 13:17:41 GMT 1999 djr
================================

- Fixed bugs in Any insertion/extraction of object references.

src/lib/omniORB2/dynamic/any.cc
src/lib/omniORB2/dynamic/anyP.h
src/tool/omniidl2/omniORB2_be/o2be_interface.cc


Wed Feb 10 15:15:01 GMT 1999 djr
================================

- Fixed bug in Any insertion code - can now marshal a
  CORBA::Object_ptr into an Any.

src/lib/omniORB2/dynamic/any.cc


Wed Feb 10 09:42:34 GMT 1999 djr
================================

- Fixed bug in which omniidl2 failed if constructed types were
  declared in an exception member declaration.

src/tool/omniidl2/omniORB2_be/o2be.h
src/tool/omniidl2/omniORB2_be/o2be_exception.cc
src/tool/omniidl2/omniORB2_be/o2be_module.cc
src/tool/omniidl2/omniORB2_be/o2be_interface.cc

- Fixed bug in omniidl2 which generates bad code when a forward
  declared interface is not defined anywhere in the translation
  unit.

src/tool/omniidl2/omniORB2_be/o2be_operation.cc


Tue Feb  9 17:44:19 GMT 1999 djr
================================

- Fixed bug in TypeCode_alignTable generation for structures and exceptions.

src/lib/omniORB2/dynamic/typecode.cc


Tue Feb  9 09:41:08 GMT 1999 djr
================================

- Fixed bug where a union helper class was not being declared before
  being declared as a friend.

src/tool/omniidl2/omniORB2_be/o2be.h
src/tool/omniidl2/omniORB2_be/o2be_module.cc
src/tool/omniidl2/omniORB2_be/o2be_interface.cc


Mon Feb  8 18:53:46 GMT 1999 djr
================================

- Fixed bug in marshalling of TypeCodes for sequences. The sequence bound
  and the content TypeCode were marshalled in the wrong order.
- Added new functions to build TypeCode descriptors for types which are
  typedef'd from CORBA::Object.

src/lib/omniORB2/dynamic/typecode.cc
include/omniORB2/tcDescriptor.h
src/lib/omniORB2/dynamic/tcParser.cc


Mon Feb  1 14:34:42 GMT 1999 djr
================================

- Initialise strings allocated with CORBA::string_alloc() to
  zero length. Effectively 'inline' uses of string_alloc and
  string_free in corbaString.cc.
- Replace a number of instances of copy-initialisation with
  direct-initialisation.

src/lib/omniORB2/orbcore/corbaString.cc
src/lib/omniORB2/orbcore/bootstrap_i.cc
src/lib/omniORB2/orbcore/corbaOrb.cc
src/lib/omniORB2/orbcore/objectRef.cc
src/lib/omniORB2/orbcore/proxyCall.cc
src/lib/omniORB2/dynamic/context.cc
src/lib/omniORB2/dynamic/request.cc
src/lib/omniORB2/dynamic/serverRequest.cc


Mon Jan 25 20:06:08 GMT 1999 sll
================================

- Hacked java rules. Use zsh instead of find to locate .class and .java
  files. For some reason, 'find' finds no file on some linux machines.

mk/java.mk
mk/afterdir.mk


Mon Jan 25 18:46:55 GMT 1999 tjr
================================

- use new vbj-idl2java script to invoke VisiBroker's idl2java

mk/platforms/i586_linux_2.0_glibc.mk


Mon Jan 25 18:27:15 GMT 1999 sll
===============================

- Fixed a rarely occurred race condition between the outgoing Scavenger and a
  client thread doing invocation which happens to fail with COMM_FAILURE.
- omniORB2 version number is now 2.7.1

mk/win32.mk  
include/omniORB2/rope.h
src/lib/omniORB2/orbcore/sharedlib/dir.mk
src/lib/omniORB2/orbcore/strand.cc
src/lib/omniORB2/dynamic/sharedlib/dir.mk
src/lib/omniORB2/lifecycle/sharedlib/dir.mk


Wed Jan 20 11:38:36 GMT 1999 tjr
================================

- Removed pjs's CORBA_UNIQUE_INTERFACES stuff for the time being (screws up
  interdependent IDL files).  Added sort to CORBA_STUB_OBJS rule to remove
  duplicates.

mk/beforedir.mk
mk/afterdir.mk
mk/unix.mk
mk/win32.mk
mk/java.mk


Mon Jan 18 13:49:31 GMT 1999 djr
================================

- Fixed bug in Any code for default cases in unions.

src/lib/omniORB2/dynamic/tcParser.cc
src/lib/omniORB2/dynamic/typecode.cc
src/lib/omniORB2/dynamic/typecode.h


Mon Jan 18 11:02:47 GMT 1999 tjr
================================

- fix omni_thread::sleep bug found by Bjorn Wennberg

src/lib/omnithread/posix.cc


Thu Jan 14 10:16:08 GMT 1999 djr
================================

- Fixed bug with name scoping problems in IDL unions which are not
  declared at the global scope.

src/tool/omniidl2/omniORB2_be/o2be_union.cc


- Added CORBA_*_PATTERN variables (which had been mistakenly removed).

mk/beforedir.mk


- Changes to sharedlib makefiles for HPUX.

src/lib/omnithread/sharedlib/dir.mk
src/lib/omniORB2/orbcore/sharedlib/dir.mk
src/lib/omniORB2/dynamic/sharedlib/dir.mk
src/lib/omniORB2/lifecycle/sharedlib/dir.mk


Wed Jan 13 15:14:11 GMT 1999 djr
================================

- New examples for DII and DSI

src/examples/dii/dir.mk
src/examples/dii/echo_diiclt.cc
src/examples/dsi/dir.mk
src/examples/dsi/echo_dsiimpl.cc

- Updated the manual - new chapters for DSI and DII

doc/tex/omniORB2.tex

- Fixed bug in DSI - interface type checking for DsiObject.

src/lib/omniORB2/dynamicImplementation.h
src/lib/omniORB2/dynamicImplementation.cc

- Fixed bug in implementation of Any. Copy constructor no longer throws
  an exception if the Any it is copying is empty.

src/lib/omniORB2/anyP.cc


Tue Jan 12 18:44:44 GMT 1999 tjr
================================

- added java documentation

doc/tex/ode.tex


Tue Jan 12 16:40:50 GMT 1999 djr
================================

- RequestImpl now duplicates the references it holds, and releases them
  when it is released.

src/lib/dynamic/pseudo.h
src/lib/dynamic/request.cc


Tue Jan 12 15:19:17 GMT 1999 tjr
================================

- Initial check-in of new java rules and first beta version of omniORBj.

mk/java.mk				- NEW FILE
mk/beforedir.mk				- delete BJH's java stuff and include
					  new java.mk
mk/afterdir.mk				- new java stub rule + improve IDL
					  "not found" rule
mk/unix.mk				- change clean rules for java
mk/platforms/i586_linux_2.0_glibc.mk	- new java stuff
mk/platforms/sun4_sosV_5.5.mk		- new java stuff
mk/platforms/sun4_sosV_5.6.mk		- new java stuff

src/lib/dir.mk			- build omniORBj on i586_linux_2.0_glibc
src/lib/omniORBj		- NEW DIRECTORY
src/lib/omniORBj/...		- NEW FILES


Tue Jan 12 11:12:52 GMT 1999 djr
================================

- Renamed UNIQUE_CORBA_INTERFAES to CORBA_UNIQUE_INTERFACES.
  Replaced other references to CORBA_INTERFACES with CORBA_UNIQUE_INTERFACES.

mk/beforedir.mk
mk/unix.mk
mk/win32.mk


Mon Jan 11 16:17:00 GMT 1999 djr
================================

- Modifications to makefiles to ensure that the correct versions
  of generated header files are picked up.

src/lib/omniORB2/dir.mk
src/lib/omniORB2/orbcore/dir.mk
src/lib/omniORB2/dynamic/dir.mk
src/lib/omniORB2/lifecycle/dir.mk
src/lib/omniORB2/dynamic/corbaidlstub.cc
src/lib/omniORB2/dynamic/corbaidldynstub.cc
src/lib/omniORB2/dynamic/irstub.cc
src/lib/omniORB2/dynamic/irdynstub.cc

- Fixed compilation errors in Interface Repository code. Several
  interfaces need to be forward-declared.

idl/corbaidl.idl


- Added guard to prevent the compiler trying to #include <corbaidl.hh>
  from ir.hh. This doesn't work as it is in <omniORB2/corbaidl.hh>.

include/omniORB2/CORBA.h


- Added information about building CORBA binaries without code
  for TypeCode, Any etc.

doc/tex/ode.tex


Fri Jan  8 11:26:43 GMT 1999 djr
================================

- Moved idl files from the src directory tree into the idl directory.

idl/Naming.idl
idl/bootstrap.idl
idl/corbaidl.idl
idl/ir.idl


Fri Jan  8 11:06:35 GMT 1999 pjs
================================

- (back ported from version 5.6) ensured removal of duplicate entries
  in CORBA_INTERFACES. Result is stored in a new variable named
  UNIQUE_CORBA_INTERFACES: use this when you want to refer to the
  corba interfaces in a make rule.

mk/beforedir.mk


Fri Jan  8 10:09:01 GMT 1999 djr
================================

- Minor fix to omni_mutex::unlock() for mach.

src/lib/omnithread/mach.cc


- Added #include <string.h>.

src/tool/omkdepend/def.h

- Changes to ODE to support split of omniORB2 library into two.

mk/beforedir.mk
mk/afterdir.mk
mk/unix.mk
mk/win32.mk


Thu Jan  7 15:28:12 GMT 1999 djr
================================

- Separated the omniORB library into two parts - the core library and
  the dynamic library (Any, TypeCode, DynAny etc.)

src/lib/omniORB/*


- New configuration variable omniORB::diiThrowsSysExceptions
- New command line options -ORBdiiThrowsSysExceptions
                           -ORBinConScanPeriod
                           -ORBoutConScanPeriod

src/lib/omniORB/orbcore/corbaOrb.cc
include/omniORB2/omniORB.h


- Support CORBA::Exception properly.

src/lib/omniORB2/orbcore/exceptn.cc


- MemBufferedStream and NetBufferedStream modified to make their
  interfaces more similar. Improved support for readonly
  MemBufferedStream.
   get_char_array() and put_char_array() now take an alignment
  argument. New methods copy_from(...).

src/lib/omniORB2/orbcore/mbufferedStream.cc
src/lib/omniORB2/orbcore/nbufferedStream.cc
src/lib/omniORB2/orbcore/giopClient.cc
src/lib/omniORB2/orbcore/giopServer.cc


- Implemented strcasecmp() and strncasecmp() for those platforms that
  don't have it.

src/lib/omniORB2/orbcore/libcWrapper.cc


- Corrected minor bug in fprintf format.

src/lib/omniORB2/orbcore/logIOstream.cc


- New singleton ProxyObjectTableCleaner to release proxy objects from
  the proxy object table when the program finishes, and help detect
  memory leaks.

src/lib/omniORB2/orbcore/objectRef.cc


- Support for new implementation of stub proxy calls.

src/lib/omniORB2/orbcore/proxyCall.cc
include/omniORB2/proxyCall.h


- New implementation of Any and TypeCode

src/lib/omniORB2/dynamic/any.cc
src/lib/omniORB2/dynamic/anyP.cc
src/lib/omniORB2/dynamic/anyP.h
src/lib/omniORB2/dynamic/tcParser.c
src/lib/omniORB2/dynamic/tcParser.h
src/lib/omniORB2/dynamic/typecode.cc
src/lib/omniORB2/dynamic/typecode.h


- Added support for DII and DSI.

include/omniORB2/CORBA.h
include/omniORB2/CORBA_basetypes.h
include/omniORB2/tcDescriptor.h
src/lib/omniORB2/orbcore/exception.cc
src/lib/omniORB2/dynamic/context.cc
src/lib/omniORB2/dynamic/contextList.cc
src/lib/omniORB2/dynamic/deferredRequest.cc
src/lib/omniORB2/dynamic/deferredRequest.h
src/lib/omniORB2/dynamic/dynamicImplementation.cc
src/lib/omniORB2/dynamic/dynamicImplementation.h
src/lib/omniORB2/dynamic/environment.cc
src/lib/omniORB2/dynamic/exceptionList.cc
src/lib/omniORB2/dynamic/namedValue.cc
src/lib/omniORB2/dynamic/nvList.cc
src/lib/omniORB2/dynamic/pseudo.h
src/lib/omniORB2/dynamic/pseudoBase.cc
src/lib/omniORB2/dynamic/request.cc
src/lib/omniORB2/dynamic/serverRequest.cc
src/lib/omniORB2/dynamic/unknownUserExn.cc


- Added support for an Interface Respository (not all platforms).

src/lib/omniORB2/dynamic/corbaidldynstub.cc
src/lib/omniORB2/dynamic/corbaidlstub.cc
src/lib/omniORB2/dynamic/ir.cc
src/lib/omniORB2/dynamic/irdynstub.cc
src/lib/omniORB2/dynamic/irstub.cc


- Support for the server side _interface operation.

src/lib/omniORB2/orbcore/object.cc


- New implementation of DynAny (using new version of Any and TypeCode).

src/lib/omniORB2/dynamic/dynAny.cc
src/lib/omniORB2/dynamic/dynAnyNil.cc
src/lib/omniORB2/dynamic/dynAny.h


- Clarified instructions for compiling stubs into DLLs with MSVC.

include/omniORB2/CORBA_sysdef.h
include/omniORB2/CORBA.h
include/omniORB2/IIOP.h
include/omniORB2/IOP.h
include/omniORB2/giopDriver.h
include/omniORB2/proxyFactory.h


Thu Jan  7 09:52:19 GMT 1999 djr
================================

- Major changes to omniidl2.
   * Support for new implementation of TypeCode and Any
   * A new output file ...DynSK.cc is generated containing
   the code to support TypeCode and Any.
   * New implementation of proxy calls.

src/tool/omniidl2/omniORB2_be/dir.mk
src/tool/omniidl2/omniORB2_be/o2be.h
src/tool/omniidl2/omniORB2_be/o2be_array.cc
src/tool/omniidl2/omniORB2_be/o2be_attribute.cc
src/tool/omniidl2/omniORB2_be/o2be_buildDesc.cc
src/tool/omniidl2/omniORB2_be/o2be_call_desc.cc
src/tool/omniidl2/omniORB2_be/o2be_cfe_interface.cc
src/tool/omniidl2/omniORB2_be/o2be_constant.cc
src/tool/omniidl2/omniORB2_be/o2be_enum.cc
src/tool/omniidl2/omniORB2_be/o2be_exception.cc
src/tool/omniidl2/omniORB2_be/o2be_interface.cc
src/tool/omniidl2/omniORB2_be/o2be_module.cc
src/tool/omniidl2/omniORB2_be/o2be_name.cc
src/tool/omniidl2/omniORB2_be/o2be_name_mangle.cc
src/tool/omniidl2/omniORB2_be/o2be_operation.cc
src/tool/omniidl2/omniORB2_be/o2be_predefined_type.cc
src/tool/omniidl2/omniORB2_be/o2be_root.cc
src/tool/omniidl2/omniORB2_be/o2be_sequence.cc
src/tool/omniidl2/omniORB2_be/o2be_string.cc
src/tool/omniidl2/omniORB2_be/o2be_struct.cc
src/tool/omniidl2/omniORB2_be/o2be_typedef.cc
src/tool/omniidl2/omniORB2_be/o2be_union.cc


Wed Jan  6 16:24:18 GMT 1999 djr
================================

- Fix in omniidl2 for VMS pre-processor.

src/tool/omniidl2/driver/drv_preproc.cc


Tue Jan  5 12:31:32 GMT 1999 sll
================================

- fix typo in #error message

include/omniORB2/CORBA_sysdep.h


Fri Dec 18 17:48:28 GMT 1998 tjr
================================

- fix bug in nameclt when unbinding an object in the root context

src/appl/utils/nameclt/nameclt.cc


Mon Dec 14 11:08:37 GMT 1998 sll
================================

- omniidl2 bug fix

  now generate correct stub for #pragma version <interface> <version no> again.
  The bug is caused by the difference in definition of yytext between Sun's
  yacc and bison.

src/tool/omniidl2/fe/idl.yy
src/tool/omniidl2/fe/y.tab.cc

Tue Dec  1 20:41:33 GMT 1998 sll
================================

- switch to use egcs-1.1.1(pre3), this compiler release fixed some
  optimisation bugs

mk/platforms/i586_linux_2.0_glibc.mk


Tue Nov 24 19:10:23 GMT 1998 tjr
================================

- Set BASE_OMNI_TREE variable and check that there is only one base OMNI tree.
  Always use omniidl2 and omkdepend from the base OMNI tree

mk/beforedir.mk
mk/unix.mk
mk/win32.mk
mk/platforms/alpha_linux_2.0.mk
mk/platforms/alpha_osf1_3.2.mk
mk/platforms/alpha_osf1_4.0.mk
mk/platforms/alpha_osf1_4.0_oldcxx.mk
mk/platforms/i586_linux_2.0.mk
mk/platforms/i586_linux_2.0_egcs.mk
mk/platforms/i586_linux_2.0_glibc.mk
mk/platforms/sun4_sosV_5.5.mk
mk/platforms/sun4_sosV_5.6.mk


Tue Nov 24 14:52:49 GMT 1998 sll
================================

- Added workaround in omnithread to cope with a bug in some versions of
  glibc 2.0.x. This workaround makes debugging omnithread programs under
  gdb on linux Redhat 5.2 or later possible.

src/lib/omnithread/posix.cc


Fri Nov 20 19:05:29 GMT 1998 sll
================================

- Added CXXOPTIONS to linux egcs shared library build

src/lib/omniORB2/sharedlib/dir.mk
src/lib/omnithread/sharedlib/dir.mk
src/lib/omniORB2/gatekeepers/sharedlib/dir.mk

Mon Nov  9 10:48:40 GMT 1998 sll
===============================

- Rename the use of "export" as variable name. "export" is a reserved C++
  keyword in standard C++

src/lib/omniORB2/ropeFactory.h
src/lib/omniORB2/tcpSocket.h
src/lib/omniORB2/tcpSocketMTfactory.cc
src/lib/omniORB2/tcpATMos.h
src/lib/omniORB2/tcpATMosMTfactory.cc


Thu Nov  5 18:02:53 GMT 1998 sll
================================

- Version 5.6 tree copied from version5.5 tree.
